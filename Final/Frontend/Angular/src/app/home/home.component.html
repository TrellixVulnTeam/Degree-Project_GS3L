<!-- Once user has logegd in, they see this home page  -->

<head>
  
</head>
<!-- CSS Style  -->
<style>
  button {
    display: block;
  }

  .center {
  text-align: center;
  }

  </style>
<!-- End of CSS Style  -->

<!-- Navigation Toolbar  -->
<!-- <mat-toolbar style="font-size: large;" [ngClass]="{'dark-theme-mode':isDarkTheme}"> -->
  <!-- Fix getting Name for the title of the Nav Bar -->
  <!-- <span *ngIf="let name of currentUser | async">{{name.email}}</span> -->
<!-- <button mat-icon-button [matMenuTriggerFor]="menu"  aria-label="Example icon-button with a menu"> -->
  <!-- <mat-icon style="font-size: 250%;">menu</mat-icon> -->
<!-- </button> -->
  <!-- Ttile based on logged in placeholder user  -->
  <!-- <span *ngFor="let t of name2" style="font-size: 160%;">  V1.8 {{newUser}} </span> -->
  <!-- <mat-menu #menu="matMenu" [ngClass]="{'dark-theme-mode':isDarkTheme}"> -->
  <!-- <button  mat-menu-item (click)="showHome()" class="btn home">Home</button> -->
  <!-- <button mat-menu-item (click)="showMarket()"class="btn market">Market</button> -->
  <!-- <button mat-menu-item (click)="showHistory()"class="btn history">History</button> -->
  <!-- <button mat-menu-item (click)="logout()">Logout</button> -->
  <!-- </mat-menu> -->
<!-- </mat-toolbar> -->

<mat-drawer-container class="example-container" style="height: 100%; background-color: rgb(37, 38, 37); overflow: hidden;" autosize="true">
  <mat-drawer mode="side" #drawer  style="
  padding: 10px;
  width: fit-content;
  min-width: 300px;
  /* height: max-content; */
  /* align-items: center; */
  /* justify-content: center; */
  background-color: rgb(54, 53, 53);
  overflow: hidden;" opened>

    <!-- SIDE NAVE CONTENT -->
    <mat-card class="example-card" class="btn1" style="width: auto;">
      <mat-card-header>
        <div mat-card-avatar style="  background-size: cover; "></div>
        <mat-card-title class="text" style="font-size:x-large;" *ngFor="let t of name2" >{{newUser}}</mat-card-title>
        <mat-card-subtitle class="text" style="color : rgb(232, 232, 232);" *ngFor="let t of name2" > Wallet: {{newUserWallet}}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
      </mat-card-content>
    </mat-card>

    <button  mat-raised-button (click)="showHome()"  class="btn1" style="background-color: slateblue slateblue;  height: 50px; font-size: large;" >
      <mat-icon>home</mat-icon>
      <span class="text">Home</span>
    </button>

    <button  mat-raised-button (click)="showMarket()" class="btn1" color="accent" style=" height: 50px; font-size: large;"  >
      <mat-icon>shopping_cart</mat-icon>
      <span class="text">Marketplace</span>
    </button> 

    <button  mat-raised-button (click)="showHistory()" class="btn1" color="accent" style=" height: 50px; font-size: large;" >
      <mat-icon>schedule</mat-icon>
      <span class="text" >History</span>
    </button> 

    <button  mat-raised-button (click)="showSettings()"  class="btn1" color="accent" style=" height: 50px; font-size: large;" >
      <mat-icon>settings</mat-icon>
      <span class="text" >Settings</span>
    </button> 

    <button  mat-raised-button (click)="logout()" class="btn1" color="accent" style=" top: 700px ; height: 50px; font-size: large;" >
      <mat-icon>logout</mat-icon>
      <span class="text">Logout</span>
    </button> 

  </mat-drawer>

  <mat-drawer-content style="height: 100%;  margin: 20px;">

    <div *ngIf="Home">
      <h2 class="text" style="text-align: center; color: rgb(255, 245, 238); font-family: Arial, Helvetica, sans-serif;">Welcome Home {{newUser}}</h2>
      <div *ngIf="!div1">
        <p style="font-weight: bold; color: seashell; text-align: center; size: 500px;">Loading todays energy predictions...</p>
        <mat-spinner color="warn" style="margin:auto;" diameter="130"></mat-spinner>
    </div>

    <div *ngFor="let cons of Consumption" style="text-align: center; color: seashell;" onload="passValue(cons.Energy)" [formControl]="homeFormController">
      
      <!-- <div class="wrapper">
        <div id="gauge1" class="gauge-container">
          <span class="label">Consumption</span>
          <mwl-gauge
          [min]= "-10"
          [max] = 10
          [dialStartAngle] = "180"
          [dialEndAngle] = "0"
          [value] = "2"
          [animated]="true"
          [animationDuration]="5"
          >
        </mwl-gauge>
        </div>

        <div id="gauge2" class="gauge-container two">
          <span class="label">Production</span>
          <mwl-gauge
          [min]= "-10"
          [max] = 10
          [dialStartAngle] = "180"
          [dialEndAngle] = "0"
          [value] = "7"
          [animated]="true"
          [animationDuration]="5">
        </mwl-gauge>
        </div>

        <div id="gauge3" class="gauge-container two" style="width: 500px; height: 500px; ">
          <span class="label">Surplus</span>
          <mwl-gauge
          [min]= "-10"
          [max] = 10
          [dialStartAngle] = "180"
          [dialEndAngle] = "0"
          [value] = "5"
          [animated]="true"
          [animationDuration]="5">
        </mwl-gauge>
        </div>
      </div> -->

      <ngx-gauge 
          [value]="gaugeValue" 
          [label]="gaugeLabel"  
          [append]="gaugeAppendText"
          [max]="gaugeMax"
          [foregroundColor] = "foregroundColor"
          [max]="gaugeMax">
          <ngx-gauge-value style="font-size: 90%" >
            {{ 22 }}
        </ngx-gauge-value>
      </ngx-gauge>
  
      <ngx-gauge 
        [value]="gaugeValue1" 
        [label]="gaugeLabel1"  
        [append]="gaugeAppendText1"
        [max]="gaugeMax"
        [foregroundColor] = "foregroundColor2"
        >
        <ngx-gauge-value style="font-size: 90%; " >
          {{ 31 }}
      </ngx-gauge-value>
      </ngx-gauge>

      <ngx-gauge 
      [value]="gaugeValue2" 
      [label]="gaugeLabel2"  
      [append]="gaugeAppendText2"
      [foregroundColor] = "foregroundColor1"
      [max]="gaugeMax"
      [thick] = 10
      >
      <ngx-gauge-value style="font-size: 90%;" >
        {{9 }}
    </ngx-gauge-value>
    </ngx-gauge>


    
      <h3 class="text" >Todays Surplus is: 9 kWh</h3>

      <button mat-raised-button class="btn1" style="margin-left: 10px; margin-right: 10px;  height: 50px; font-size: large; "  (click)="open(content)">Generate posting from surplus</button>

      <!-- 
      <div class="wrapper">
        <google-chart style="align-content: center;" chart="chartObject" *ngIf="div1"
          [title]="title"
          [type]= "type"
          [data]="myData"
          [columns]="columnNames"
          [options]="options"
          [width]="width"
          [height]="height">
        </google-chart>
      </div> -->


    <!-- POSTING CONFIRMATION CARD -->
    
    <ng-template #content let-modal >
      
      <div class="modal-header" style="background-color: rgb(54, 53, 53);" >
        
        <div class="text" style="font-size: x-large; text-align: center; " id="modal-basic-title">Posting Confirmation</div>
        <button mat-raised-button type="btn1" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
          <mat-icon>close</mat-icon>
        </button>
      </div>
    

      <div class="text" style="background-color: rgb(54, 53, 53); text-align: center; " >Todays Surplus is: 9 kWh</div>
      <div class="text" style="background-color: rgb(54, 53, 53); text-align: center;  " >
        Please enter the reservation value:
      <mat-form-field class="example-form-field" appearance="outline">
        <input matInput type="number" value=0 id="userValue">
      </mat-form-field>

      <!-- Target the posting -->
      <button mat-raised-button type="button"  class="btn1"  (click)="addHomePosting(homeFormController.value); modal.close('Save click')">Post!</button>
      </div>
    </ng-template>
  </div>

    </div>
    <div id="market" *ngIf="Market">
      <app-market></app-market>
    </div>
    
    <div id="history" *ngIf="History">
      <app-history></app-history>
    </div>

    <div id="settings" *ngIf="Settings">
      <app-settings></app-settings>
    </div>

  </mat-drawer-content>


  <!-- SIDE NAVE  -->
  <mat-drawer #sideNav mode="side" opened="true" position="end" style=" padding: 20px; width: 300px; background-color: rgb(54, 53, 53); overflow: auto;
  overscroll-behavior-y: contain; ">

    <iframe src="https://www.meteoblue.com/en/weather/widget/three/thunder-bay_canada_6166140?geoloc=fixed&nocurrent=0&noforecast=0&noforecast=1&days=4&tempunit=CELSIUS&windunit=KILOMETER_PER_HOUR&layout=dark"  frameborder="0" scrolling="NO" allowtransparency="true" sandbox="allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox" style="width: 240px; height: 160px"></iframe><div><!-- DO NOT REMOVE THIS LINK --><a href="https://www.meteoblue.com/en/weather/week/thunder-bay_canada_6166140?utm_source=weather_widget&utm_medium=linkus&utm_content=three&utm_campaign=Weather%2BWidget" target="_blank"></a></div> 
        
    <div class="header-container" >
      <h4 style="color: seashell;" >Energy News</h4>
      <!-- <h1>My World News Aggregator!</h1> -->
    </div>
    <div class="articles-container">
        <div class="article-container" *ngFor="let article of articles.articles">
            <div class="title-image-container">
                <div class="title"style="color: seashell;" >{{article.title}}</div>
                <img class="image" src="{{article.urlToImage}}">
            </div>
            <div class="description-container">
                <p style="color: seashell;" >{{article.description}}</p>
                <button mat-raised-button class="btn1" (onload)="openArticle(article.url)" (click)="openArticle(article.url)" color="primary">Link</button>
            </div>
        </div>
    </div>
    </mat-drawer>

  </mat-drawer-container>


 <!-- End of Navigation Toolbar  -->





